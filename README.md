# 📦 Outputs — Next-Day Stock Prediction

This folder contains the figures and CSVs generated by the notebook/app:
- **Regression track:** next-day log return prediction
- **Classifier track:** Up/Down direction prediction (default τ=0.5) + **tuned threshold τ\*** (picked on CV to maximize F1)
- **Comparisons:** equity curves and side-by-side direction metrics

> All images and CSVs are auto-created by the notebook stages (4–9) or the Streamlit app’s export buttons.

---

## 🔍 Quick Gallery

> Click any image to view full size.

### 1) Holdout Forecast (Regression)
<a href="./holdout_forecast.png">
  <img src="./holdout_forecast.png" alt="Holdout forecast (regression)" width="720">
</a>  
<sub>*True next-day log return vs predicted (last ≈252 business days).*</sub>

---

### 2) Direction (from Regression Sign)
<a href="./confusion_matrix.png">
  <img src="./confusion_matrix.png" alt="Confusion matrix (regression sign)" width="380">
</a>  
<sub>*Confusion matrix when we take sign(ŷ) as Up/Down.*</sub>

---

### 3) Classifier — Default Threshold (τ=0.5)
<a href="./classifier_confusion_matrix.png">
  <img src="./classifier_confusion_matrix.png" alt="Classifier confusion matrix (tau=0.5)" width="380">
</a>  
<sub>*Dedicated classifier (Logistic/RF/GB/XGB), using probability ≥ 0.5 → Up.*</sub>

---

### 4) Classifier — Tuned Threshold (τ\*)
<a href="./classifier_confusion_matrix_tuned.png">
  <img src="./classifier_confusion_matrix_tuned.png" alt="Classifier confusion matrix (tuned threshold)" width="380">
</a>  
<sub>*Same classifier, but τ tuned on CV to maximize F1.*</sub>

---

### 5) Threshold Tuning Curve
<a href="./classifier_threshold_curve.png">
  <img src="./classifier_threshold_curve.png" alt="Threshold tuning curve" width="720">
</a>  
<sub>*F1 and Accuracy across thresholds; vertical line shows best τ\**.</sub>

---

### 6) Equity Curves — Strategy Comparison
<a href="./holdout_equity_comparison.png">
  <img src="./holdout_equity_comparison.png" alt="Equity curve comparison" width="720">
</a>  
<sub>*Buy-&-Hold vs Regression-Sign vs Classifier@0.5 vs Classifier@τ\** on holdout.</sub>

---

### 7) Equity Curve — Single Strategy (from Stage 4)
<a href="./equity_curve.png">
  <img src="./equity_curve.png" alt="Equity curve (single strategy)" width="720">
</a>  
<sub>*Buy-&-Hold vs one selected strategy (from Stage 4 pipeline).* </sub>

---

## 📊 Key CSVs (for analysis)

- `cv_summary.csv` — Cross-validation (mean per model) for **regression**.  
- `holdout_metrics.csv` — Holdout regression metrics (MAE, RMSE, MAPE, R²) for the **best regression** model.  
- `direction_metrics.csv` — Direction metrics from **regression sign** (Accuracy/Precision/Recall/F1).  
- `holdout_predictions.csv` — Timestamps + true/predicted returns + Up/Down labels (from regression).  
- `classifier_cv_summary.csv` — CV summary (mean per model) for **classification**.  
- `classifier_holdout_metrics.csv` — Holdout metrics for the **best classifier** (τ=0.5).  
- `classifier_threshold_curve.csv` — Threshold vs F1/Accuracy.  
- `classifier_threshold_selection.json` — Best τ\* + CV/Holdout metrics snapshot.  
- `holdout_direction_comparison.csv` — Direction metrics for **Reg-Sign**, **Classifier@0.5**, **Classifier@τ\***.  
- `holdout_equity_comparison.csv` — Equity curves for the same 3 strategies + Buy-&-Hold.  

> Tip: Open the CSVs directly in GitHub to preview; download for deeper analysis.

---

## 🧭 How to Reproduce These Outputs

- **Notebook (recommended):** run Stages **0 → 9** top-to-bottom.  
- **Streamlit app:** `streamlit run app.py` → upload `Market.csv` → Run.  
  - Use the **Compare** tab and download buttons to export CSVs.

---

## ℹ️ Notes

- Images/CSVs may vary with:
  - Selected ticker (app auto-selects the longest-history ticker)
  - Holdout window length (default ≈252B)
  - Model choices and random seed
  - Whether XGBoost is available
- For better performance, add **exogenous features** (VIX, sector ETFs, FX, macro) and use **walk-forward tuning**.

---

## 📜 License

Outputs are derived from your local runs. See repository **LICENSE** for terms.
